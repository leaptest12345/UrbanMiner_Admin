{"version":3,"sources":["components/cards/MiniCardComponent.js","routes/dashboard/DashboardComponent.js","routes/dashboard/index.js"],"names":["useStyles","createUseStyles","theme","container","backgroundColor","border","color","lightGrayishBlue2","borderRadius","cursor","maxWidth","padding","borderColor","lightBlue","title","typography","cardTitle","grayishBlue2","marginBottom","minWidth","textAlign","value","veryDarkGrayishBlue","fontWeight","fontSize","letterSpacing","lineHeight","MiniCardComponent","className","useTheme","classes","composedClassName","join","flexGrow","horizontal","vertical","i","cardsContainer","marginRight","marginTop","cardRow","miniCardContainer","todayTrends","lastRow","unresolvedTickets","tasks","DashboardComponent","useState","totalUser","setTotalUser","totalSubUser","setTotalSubUser","totalItem","setTotalItem","totalInvoice","setTotalInvoice","subUserInvoice","setSubUserInvoice","adminLevel","setAdminLevel","subUserIds","getAllData","localStorage","getItem","id","userRef","ref","database","onValue","snapshot","val","subUserRef","newArr","forEach","child","isDeleted","push","ID","formateData","filter","item","length","starCountRef","starCountRef1","map","console","log","userId","includes","starCountRef2","useEffect","wrap","breakpoints","768","384"],"mappings":"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","file":"static/js/3.5ef10954.chunk.js","sourcesContent":["import React from 'react';\r\nimport { Column } from 'simple-flexbox';\r\nimport { createUseStyles, useTheme } from 'react-jss';\r\n\r\nconst useStyles = createUseStyles((theme) => ({\r\n    container: {\r\n        backgroundColor: '#FFFFFF',\r\n        border: `1px solid ${theme.color.lightGrayishBlue2}`,\r\n        borderRadius: 4,\r\n        cursor: 'pointer',\r\n        maxWidth: 350,\r\n        padding: '16px 32px 16px 32px',\r\n        '&:hover': {\r\n            borderColor: theme.color.lightBlue,\r\n            '&:nth-child(n) > span': {\r\n                color: theme.color.lightBlue\r\n            }\r\n        }\r\n    },\r\n    title: {\r\n        ...theme.typography.cardTitle,\r\n        color: theme.color.grayishBlue2,\r\n        marginBottom: 12,\r\n        minWidth: 102,\r\n        textAlign: 'center'\r\n    },\r\n    value: {\r\n        color: theme.color.veryDarkGrayishBlue,\r\n        fontWeight: 'bold',\r\n        fontSize: 40,\r\n        letterSpacing: '1px',\r\n        lineHeight: '50px',\r\n        textAlign: 'center'\r\n    }\r\n}));\r\n\r\nfunction MiniCardComponent({ className = '', title, value }) {\r\n    const theme = useTheme();\r\n    const classes = useStyles({ theme });\r\n    const composedClassName = [classes.container, className].join(' ');\r\n    return (\r\n        <Column flexGrow={1} className={composedClassName} horizontal='center' vertical='center'>\r\n            <span className={classes.title}>{title}</span>\r\n            <span className={classes.value}>{value}</span>\r\n        </Column>\r\n    );\r\n}\r\n\r\nexport default MiniCardComponent;\r\n","import React, { useEffect, useState } from 'react';\r\nimport { Column, Row } from 'simple-flexbox';\r\nimport { database } from 'configs/firebaseConfig';\r\nimport { child, onValue, ref } from 'firebase/database';\r\nimport { createUseStyles, useTheme } from 'react-jss';\r\nimport { formateData } from 'util/formateData';\r\nimport MiniCardComponent from 'components/cards/MiniCardComponent';\r\n\r\nconst useStyles = createUseStyles({\r\n    cardsContainer: {\r\n        marginRight: -30,\r\n        marginTop: -30\r\n    },\r\n    cardRow: {\r\n        marginTop: 30,\r\n        '@media (max-width: 768px)': {\r\n            marginTop: 0\r\n        }\r\n    },\r\n    miniCardContainer: {\r\n        flexGrow: 1,\r\n        marginRight: 30,\r\n        '@media (max-width: 768px)': {\r\n            marginTop: 30,\r\n            maxWidth: 'none'\r\n        }\r\n    },\r\n    todayTrends: {\r\n        marginTop: 30\r\n    },\r\n    lastRow: {\r\n        marginTop: 30\r\n    },\r\n    unresolvedTickets: {\r\n        marginRight: 30,\r\n        '@media (max-width: 1024px)': {\r\n            marginRight: 0\r\n        }\r\n    },\r\n    tasks: {\r\n        marginTop: 0,\r\n        '@media (max-width: 1024px)': {\r\n            marginTop: 30\r\n        }\r\n    }\r\n});\r\n\r\nfunction DashboardComponent() {\r\n    const [totalUser, setTotalUser] = useState('');\r\n    const [totalSubUser, setTotalSubUser] = useState('');\r\n    const [totalItem, setTotalItem] = useState('');\r\n    const [totalInvoice, setTotalInvoice] = useState('');\r\n    const [subUserInvoice, setSubUserInvoice] = useState('');\r\n    const [adminLevel, setAdminLevel] = useState(1);\r\n    const [subUserIds, setSubUserId] = useState([]);\r\n\r\n    const getAllData = async () => {\r\n        try {\r\n            const id = await localStorage.getItem('userID');\r\n            const userRef = ref(database, `/ADMIN/USERS/${id}`);\r\n            onValue(userRef, (snapshot) => {\r\n                setAdminLevel(snapshot.val().adminLevel);\r\n            });\r\n            const subUserRef = ref(database, `/ADMIN/USERS/${id}/SUB_USERS`);\r\n            onValue(subUserRef, (snapshot) => {\r\n                const newArr = snapshot.val();\r\n                snapshot.forEach((child) => {\r\n                    if (child.val()) {\r\n                        if (child.val().isDeleted != true) {\r\n                            subUserIds.push(child.val().ID);\r\n                        }\r\n                    }\r\n                });\r\n                setTotalSubUser(\r\n                    formateData(newArr).filter((item) => item.isDeleted != true).length\r\n                );\r\n            });\r\n            const starCountRef = ref(database, '/USERS');\r\n            onValue(starCountRef, (snapshot) => {\r\n                const newArr = snapshot.val();\r\n                setTotalUser(formateData(newArr).filter((item) => item.isDeleted != true).length);\r\n            });\r\n            const starCountRef1 = ref(database, '/INVOICE_LIST');\r\n            onValue(starCountRef1, (snapshot) => {\r\n                const newArr = snapshot.val();\r\n                formateData(newArr).map((item) => {\r\n                    console.log('total invoices', item.userId);\r\n                });\r\n                setSubUserInvoice(\r\n                    formateData(newArr).filter((item) => subUserIds.includes(item.userId)).length\r\n                );\r\n                setTotalInvoice(formateData(newArr).length);\r\n            });\r\n            const starCountRef2 = ref(database, '/ADMIN/ITEM');\r\n            onValue(starCountRef2, (snapshot) => {\r\n                const newArr = snapshot.val();\r\n                setTotalItem(formateData(newArr).length);\r\n            });\r\n        } catch (error) {\r\n            console.log(error);\r\n        }\r\n    };\r\n    useEffect(() => {\r\n        getAllData();\r\n    }, []);\r\n    const theme = useTheme();\r\n\r\n    const classes = useStyles(theme);\r\n    return (\r\n        <Column>\r\n            <Row\r\n                className={classes.cardsContainer}\r\n                wrap\r\n                flexGrow={1}\r\n                horizontal='space-between'\r\n                breakpoints={{ 768: 'column' }}\r\n            >\r\n                <Row\r\n                    className={classes.cardRow}\r\n                    wrap\r\n                    flexGrow={1}\r\n                    horizontal='space-between'\r\n                    breakpoints={{ 384: 'column' }}\r\n                >\r\n                    <MiniCardComponent\r\n                        className={classes.miniCardContainer}\r\n                        title='AdminLevel'\r\n                        value={adminLevel}\r\n                    />\r\n                    <MiniCardComponent\r\n                        className={classes.miniCardContainer}\r\n                        title='Total User'\r\n                        value={adminLevel == 1 ? totalUser : totalSubUser}\r\n                    />\r\n                    <MiniCardComponent\r\n                        className={classes.miniCardContainer}\r\n                        title='Total Items'\r\n                        value={totalItem}\r\n                    />\r\n                </Row>\r\n                <MiniCardComponent\r\n                    className={classes.miniCardContainer}\r\n                    title='TotalInvoice'\r\n                    value={adminLevel == 1 ? totalInvoice : subUserInvoice}\r\n                />\r\n            </Row>\r\n        </Column>\r\n    );\r\n}\r\n\r\nexport default DashboardComponent;\r\n","import DashboardComponent from './DashboardComponent';\r\n\r\nexport default DashboardComponent;\r\n"],"sourceRoot":""}